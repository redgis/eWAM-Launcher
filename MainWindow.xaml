<controls:MetroWindow x:Class="eWamLauncher.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:controls="http://metro.mahapps.com/winfx/xaml/controls"
        xmlns:local="clr-namespace:eWamLauncher"
        mc:Ignorable="d"
        Title="eWAM Launcher" Height="600" Width="1200" ResizeMode="CanResizeWithGrip">

   <DockPanel>
      <StackPanel Orientation="Horizontal" DockPanel.Dock="Bottom" HorizontalAlignment="Center">
         <Image Source="pack://application:,,,/icon.ico" Width="32" Height="32" Margin="10" HorizontalAlignment="Center" VerticalAlignment="Bottom" />
         <!-- <TextBlock Text="{Binding assemblyVersion}" HorizontalAlignment="Center" VerticalAlignment="Center" FontStyle="Italic" FontSize="15" Margin="50,0"/> -->
      </StackPanel>

      <TabControl TabStripPlacement="Left">
         <TabItem Header="Environments  ">
            <Grid HorizontalAlignment="Stretch">
               <Grid.ColumnDefinitions>
                  <ColumnDefinition Width="210" MinWidth="150"/>
                  <ColumnDefinition Width="5"/>
                  <ColumnDefinition Width="*"/>
               </Grid.ColumnDefinitions>

               <StackPanel Orientation="Vertical" Grid.Column="0" Margin="5">
                  <ListBox HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                  x:Name="lbEnvList"
                  ItemsSource="{Binding profile.environments, Mode=TwoWay}"
                  SelectedIndex="0"
                  DisplayMemberPath="name"
                  MinHeight="200"/>
                  <WrapPanel Orientation="Horizontal" Margin="0,2">
                     <Button Click="OnNewEnvironment" Content="New" Margin="2,2"/>
                     <Button Click="OnDuplicateEnvironment" Content="Duplicate" Margin="2,2"/>
                     <Button Click="OnDeleteEnvironment" Content="Delete" Margin="2,2"/>
                     <Button Click="OnImportEnvironment" Content="Import" Margin="2,2"/>
                  </WrapPanel>
               </StackPanel>
               <GridSplitter HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Grid.Column="1" Background="IndianRed"/>
               <DockPanel Grid.Column="2" VerticalAlignment="Stretch">
                  <TabControl HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Margin="5" HorizontalContentAlignment="Center" TabStripPlacement="Top">
                     <TabItem Header="General ">
                        <Grid>
                           <Grid.ColumnDefinitions>
                              <ColumnDefinition Width="Auto"/>
                              <ColumnDefinition/>
                              <ColumnDefinition Width="Auto"/>
                           </Grid.ColumnDefinitions>
                           <Grid.RowDefinitions>
                              <RowDefinition Height="Auto"/>
                              <RowDefinition Height="Auto"/>
                              <RowDefinition Height="Auto"/>
                              <RowDefinition />
                           </Grid.RowDefinitions>
                           <Label Content="Name: " Grid.Column="0" Grid.Row="0"/>
                           <TextBox Text="{Binding SelectedItem.name, ElementName=lbEnvList, Mode=TwoWay}" Grid.Column="1" Grid.Row="0" Margin="5"/>
                           <Label Content="Path: " Grid.Column="0" Grid.Row="1"/>
                           <TextBox Text="{Binding SelectedItem.tgvPath, ElementName=lbEnvList, Mode=TwoWay}" Grid.Column="1" Grid.Row="1" Margin="5"/>
                           <StackPanel Orientation="Horizontal" Grid.Column="2" Grid.Row="1">
                              <Button Content="Change" Margin="5"/>
                              <Button Content="Explore" Margin="5"/>
                           </StackPanel>
                           <Label Content="eWAM: " Grid.Column="0" Grid.Row="2"/>
                           <ComboBox x:Name="cbEwam" ItemsSource="{Binding profile.ewams}"
                              DisplayMemberPath="name"
                              SelectedValue="{Binding SelectedItem.ewam, ElementName=lbEnvList}"
                              Grid.Column="1" Grid.Row="2" Margin="5"/>
                        </Grid>
                     </TabItem>
                     <TabItem Header="Env. Variables ">
                        <DockPanel>
                           <Button Click="OnReevaluateEnvVariables" Content="Re-Evaluate" DockPanel.Dock="Bottom" HorizontalAlignment="Center"/>
                           <DataGrid ItemsSource="{Binding SelectedItem.environmentVariables, ElementName=lbEnvList, Mode=TwoWay}" 
                              CurrentCellChanged="OnReevaluateEnvVariables"
                              AutoGenerateColumns="False"
                              ToolTip="WYDE-DLL should not be added : it is automatically generated from binaries settings CppDll. Use SUPPR to remove a line. Double-click to modify.">
                              <DataGrid.Columns>
                                 <DataGridTextColumn Header="Name" Binding="{Binding name, Mode=TwoWay}"/>
                                 <DataGridTextColumn Header="Value" Binding="{Binding value, Mode=TwoWay}">
                                    <DataGridTextColumn.ElementStyle>
                                       <Style>
                                          <Setter Property="TextBlock.TextWrapping" Value="Wrap" />
                                          <Setter Property="TextBlock.TextAlignment" Value="Left"/>
                                       </Style>
                                    </DataGridTextColumn.ElementStyle>
                                 </DataGridTextColumn>
                                 <DataGridTextColumn Header="Interpreted" Binding="{Binding result, Mode=TwoWay}">
                                    <DataGridTextColumn.ElementStyle>
                                       <Style>
                                          <Setter Property="TextBlock.TextWrapping" Value="Wrap" />
                                          <Setter Property="TextBlock.TextAlignment" Value="Left"/>
                                       </Style>
                                    </DataGridTextColumn.ElementStyle>
                                 </DataGridTextColumn>
                              </DataGrid.Columns>
                           </DataGrid>

                        </DockPanel>
                     </TabItem>
                     <TabItem Header="Launchers ">
                        <DockPanel>
                           <WrapPanel Orientation="Horizontal" Margin="0,2" DockPanel.Dock="Bottom">
                              <Button Click="OnNewLauncher" Content="New" Margin="2,2"/>
                              <Button Click="OnDuplicateLauncher" Content="Duplicate" Margin="2,2"/>
                              <Button Click="OnDeleteLauncher" Content="Delete" Margin="2,2"/>
                              <Button Click="OnImportLaunchers" Content="Import" Margin="2,2"/>
                           </WrapPanel>
                           <Grid>
                              <Grid.ColumnDefinitions>
                                 <ColumnDefinition Width="320" MinWidth="150"/>
                                 <ColumnDefinition Width="2"/>
                                 <ColumnDefinition Width="*"/>
                              </Grid.ColumnDefinitions>

                              <ListBox HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Grid.Column="0"
                                 x:Name="lbLauncherList"
                                 ItemsSource="{Binding SelectedItem.launchers, ElementName=lbEnvList, Mode=TwoWay}"
                                 SelectedIndex="0"
                                 DisplayMemberPath="name"
                                 MinWidth="120"
                                 MinHeight="200"
                                 Margin="5"/>
                              <GridSplitter HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Grid.Column="1" Background="IndianRed"/>
                              <Grid Grid.Column="2">
                                 <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition/>
                                    <ColumnDefinition Width="Auto"/>
                                 </Grid.ColumnDefinitions>
                                 <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                 </Grid.RowDefinitions>

                                 <Label Content="Name: " Grid.Column="0" Grid.Row="0"/>
                                 <TextBox Text="{Binding SelectedItem.name, ElementName=lbLauncherList, Mode=TwoWay}" Grid.Column="1" Grid.Row="0" Margin="5"/>
                                 <Label Content="Program: " Grid.Column="0" Grid.Row="1"/>
                                 <TextBox Text="{Binding SelectedItem.program, ElementName=lbLauncherList, Mode=TwoWay}" Grid.Column="1" Grid.Row="1" Margin="5"/>
                                 <Label Content="Arguments: " Grid.Column="0" Grid.Row="2"/>
                                 <TextBox Text="{Binding SelectedItem.arguments, ElementName=lbLauncherList, Mode=TwoWay}" TextWrapping="Wrap" Grid.Column="1" Grid.Row="2" Margin="5"/>
                                 <Label Content="Binary set: " Grid.Column="0" Grid.Row="3"/>
                                 <!--<ComboBox ItemsSource="{Binding SelectedItem.binariesSets, ElementName=lbEnvList}"
                                     DisplayMemberPath="name"
                                     SelectedValue="{Binding SelectedItem.binariesSet, ElementName=lbLauncherList}" 
                                     SelectedValuePath="name"
                                     Grid.Column="1" Grid.Row="3" Margin="5"/>-->
                                 <ComboBox ItemsSource="{Binding SelectedItem.binariesSets, ElementName=cbEwam, Mode=TwoWay}"
                                     DisplayMemberPath="name"
                                     SelectedItem="{Binding SelectedItem.binariesSet, ElementName=lbLauncherList, Mode=TwoWay}"
                                     Grid.Column="1" Grid.Row="3" Margin="5"/>
                                 <Button Click="OnExecuteLauncher" Content="Start" HorizontalAlignment="Left" Grid.Column="1" Grid.Row="4" Margin="5"/>
                              </Grid>
                           </Grid>
                        </DockPanel>
                     </TabItem>
                     <TabItem Header="WydeWeb "/>
                  </TabControl>
               </DockPanel>
            </Grid>
         </TabItem>

         <TabItem Header="eWams  ">
            <Grid HorizontalAlignment="Stretch">
               <Grid.ColumnDefinitions>
                  <ColumnDefinition Width="210" MinWidth="150"/>
                  <ColumnDefinition Width="5"/>
                  <ColumnDefinition Width="*"/>
               </Grid.ColumnDefinitions>

               <StackPanel Orientation="Vertical" Grid.Column="0" Margin="5">
                  <ListBox HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                     x:Name="lbEwamList"
                     ItemsSource="{Binding profile.ewams, Mode=TwoWay}"
                     SelectedIndex="0"
                     DisplayMemberPath="name"
                     MinHeight="200"/>

                  <WrapPanel Orientation="Horizontal" Margin="0,2">
                     <Button Click="OnNewEwam" Content="New" Margin="2,2"/>
                     <Button Click="OnDuplicateEwam" Content="Duplicate" Margin="2,2"/>
                     <Button Click="OnDeleteEwam" Content="Delete" Margin="2,2"/>
                     <Button Click="OnImportEwam" Content="Import" Margin="2,2"/>
                  </WrapPanel>
               </StackPanel>
               <GridSplitter HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Grid.Column="1" Background="IndianRed"/>
               <DockPanel Grid.Column="2" VerticalAlignment="Stretch">
                  <TabControl HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Margin="5" HorizontalContentAlignment="Center" TabStripPlacement="Top">
                     <TabItem Header="General ">
                        <Grid>
                           <Grid.ColumnDefinitions>
                              <ColumnDefinition Width="Auto"/>
                              <ColumnDefinition/>
                              <ColumnDefinition Width="Auto"/>
                           </Grid.ColumnDefinitions>
                           <Grid.RowDefinitions>
                              <RowDefinition Height="Auto"/>
                              <RowDefinition Height="Auto"/>
                              <RowDefinition />
                           </Grid.RowDefinitions>
                           <Label Content="Name: " Grid.Column="0" Grid.Row="0"/>
                           <TextBox Text="{Binding SelectedItem.name, ElementName=lbEwamList, Mode=TwoWay}" Grid.Column="1" Grid.Row="0" Margin="5"/>
                           <Label Content="Path: " Grid.Column="0" Grid.Row="1"/>
                           <TextBox Text="{Binding SelectedItem.basePath, ElementName=lbEwamList, Mode=TwoWay}" Grid.Column="1" Grid.Row="1" Margin="5"/>
                           <StackPanel Orientation="Horizontal" Grid.Column="2" Grid.Row="1">
                              <Button Content="Change" Margin="5"/>
                              <Button Content="Explore" Margin="5"/>
                           </StackPanel>
                        </Grid>
                     </TabItem>
                     <TabItem Header="Binaries ">
                        <DockPanel>
                           <WrapPanel Orientation="Horizontal" HorizontalAlignment="Left" Margin="0,2" DockPanel.Dock="Bottom">
                              <Button Click="OnNewBinariesSet" Content="New" Margin="2,2"/>
                              <Button Click="OnDuplicateBinariesSet" Content="Duplicate" Margin="2,2"/>
                              <Button Click="OnDeleteBinariesSet" Content="Delete" Margin="2,2"/>
                              <!--<Button Click="OnImportBinariesSets" Content="Import" Margin="2,2"/>-->
                           </WrapPanel>
                           <Grid>
                              <Grid.ColumnDefinitions>
                                 <ColumnDefinition Width="170" MinWidth="150"/>
                                 <ColumnDefinition Width="2"/>
                                 <ColumnDefinition Width="*"/>
                              </Grid.ColumnDefinitions>
                              <ListBox HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Grid.Column="0"
                                 x:Name="lbBinariesSets"
                                 ItemsSource="{Binding SelectedItem.binariesSets, ElementName=lbEwamList, Mode=TwoWay}"
                                 SelectedIndex="0"
                                 DisplayMemberPath="name"
                                 MinWidth="120"
                                 MinHeight="200"
                                 Margin="5"/>
                              <GridSplitter HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Grid.Column="1" Background="IndianRed"/>
                              <Grid Grid.Column="2">
                                 <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition/>
                                 </Grid.ColumnDefinitions>
                                 <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="*"/>
                                    <RowDefinition Height="*"/>
                                    <RowDefinition Height="*"/>
                                 </Grid.RowDefinitions>
                                 <Label Content="Name: " Grid.Column="0" Grid.Row="0"/>
                                 <TextBox Text="{Binding SelectedItem.name, ElementName=lbBinariesSets, Mode=TwoWay}" Grid.Column="1" Grid.Row="0" Margin="5"/>
                                 <Label Content="Binaries pathes: " Grid.Column="0" Grid.Row="1"/>
                                 <TextBox Text="{Binding SelectedItem.exePathes, ElementName=lbBinariesSets, Mode=TwoWay}" ToolTip="One path per line. '\n' seperated pathes." Grid.Column="1" Grid.Row="1" Margin="5"/>
                                 <Label Content="Dll pathes: " Grid.Column="0" Grid.Row="2"/>
                                 <TextBox Text="{Binding SelectedItem.dllPathes, ElementName=lbBinariesSets, Mode=TwoWay}" ToolTip="One path per line. '\n' seperated pathes." Grid.Column="1" Grid.Row="2" Margin="5"/>
                                 <Label Content="CppDll pathes: " Grid.Column="0" Grid.Row="3"/>
                                 <TextBox Text="{Binding SelectedItem.cppdllPathes, ElementName=lbBinariesSets, Mode=TwoWay}" ToolTip="One path per line. '\n' seperated pathes." Grid.Column="1" Grid.Row="3" Margin="5"/>
                              </Grid>
                           </Grid>
                        </DockPanel>
                     </TabItem>
                  </TabControl>
               </DockPanel>
            </Grid>
         </TabItem>

         <TabItem Header="Settings  ">
            <!--<DataGrid ItemsSource="{Binding profile.settings}"/>-->
         </TabItem>
      </TabControl>
   </DockPanel>
</controls:MetroWindow>
